<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Evidence vÃ½jezdÅ¯</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    form { margin-bottom: 30px; }
    label { display: block; margin-top: 10px; }
    table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; }
    table { width: 100%; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Evidence vÃ½jezdÅ¯</h1>

  <form id="vyjezdForm">
    <label>JmÃ©no a pÅ™Ã­jmenÃ­ zodpovÄ›dnÃ© osoby za vÃ½jezd:*<br><input type="text" name="zodpovedna" required></label>
    <label>JmÃ©no a pÅ™Ã­jmenÃ­ ostatnÃ­ch pracovnÃ­kÅ¯:<br><input type="text" name="pracovnici"></label>
    <label>ÄŒas zapoÄetÃ­ vÃ½jezdu:*<br><input type="time" name="start" required></label>
    <label>ÄŒas ukonÄenÃ­ vÃ½jezdu:*<br><input type="time" name="end" required></label>
    <label>MÃ­sto vÃ½jezdu:*<br><input type="text" name="misto" required></label>
    <label>ÄŒinnost:*<br><input type="text" name="cinnost" required></label>
    <label>ZapÅ¯jÄenÃ¡ vozidla:<br><input type="text" name="vozidla"></label>
    <label>PoznÃ¡mka:<br><textarea name="poznamka" rows="3"></textarea></label>
    <br>
    <button type="submit">Odeslat</button>
  </form>

  <h2>Seznam vÃ½jezdÅ¯</h2>
  <table id="vystup">
    <thead>
      <tr>
        <th>Datum</th>
        <th>ZodpovÄ›dnÃ¡ osoba</th>
        <th>PracovnÃ­ci</th>
        <th>ZaÄÃ¡tek</th>
        <th>Konec</th>
        <th>MÃ­sto</th>
        <th>ÄŒinnost</th>
        <th>Vozidla</th>
        <th>PoznÃ¡mka</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    // ğŸ”§ ZDE VLOÅ½ SVÃ‰ FIREBASE KONFIGURAÄŒNÃ ÃšDAJE
    const firebaseConfig = {
      apiKey: "TVÅ®J_API_KEY",
      authDomain: "TVÅ®J_PROJECT.firebaseapp.com",
      databaseURL: "https://TVÅ®J_PROJECT.firebaseio.com",
      projectId: "TVÅ®J_PROJECT",
      storageBucket: "TVÅ®J_PROJECT.appspot.com",
      messagingSenderId: "TVÅ®J_SENDER_ID",
      appId: "TVÅ®J_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const form = document.getElementById('vyjezdForm');
    const tbody = document.querySelector('#vystup tbody');

    form.addEventListener('submit', function(event) {
      event.preventDefault();
      const data = new FormData(form);
      const today = new Date();
      const datum = today.toLocaleDateString('cs-CZ');

      const vyjezd = {
        datum: datum,
        zodpovedna: data.get("zodpovedna"),
        pracovnici: data.get("pracovnici"),
        start: data.get("start"),
        end: data.get("end"),
        misto: data.get("misto"),
        cinnost: data.get("cinnost"),
        vozidla: data.get("vozidla"),
        poznamka: data.get("poznamka")
      };

      db.ref("vyjezdy").push(vyjezd);
      form.reset();
    });

    // NaÄti a zobraz existujÃ­cÃ­ data
    db.ref("vyjezdy").on("child_added", (snapshot) => {
      const vyjezd = snapshot.val();
      const row = document.createElement('tr');

      ["datum", "zodpovedna", "pracovnici", "start", "end", "misto", "cinnost", "vozidla", "poznamka"].forEach(name => {
        const td = document.createElement('td');
        td.textContent = vyjezd[name] || "";
        row.appendChild(td);
      });

      tbody.appendChild(row);
    });
  </script>
</body>
</html>
